# 衆議院選挙2026サイト - 共同開発ガイド

## 1. GitHubでの協力者追加

### リポジトリオーナー（あなた）の作業

1. **GitHubリポジトリにアクセス**
   - https://github.com/haguro195-commits/election-site-2025

2. **Settings → Collaborators**
   - 「Manage access」をクリック
   - 「Invite a collaborator」をクリック

3. **協力者を招待**
   - 協力者のGitHubユーザー名またはメールアドレスを入力
   - 権限レベルを選択：
     - **Write**: コードの編集・プッシュ可能（推奨）
     - **Admin**: 全ての管理権限
     - **Read**: 閲覧のみ

4. **招待を送信**
   - 協力者にメール通知が送られます

### 協力者の作業

1. **招待を受諾**
   - メールまたはGitHubの通知から招待を受諾

2. **リポジトリをクローン**
   ```bash
   git clone https://github.com/haguro195-commits/election-site-2025.git
   cd election-site-2025
   ```

3. **開発環境セットアップ**
   ```bash
   npm install
   npm run dev
   ```

## 2. ブランチ戦略

### 推奨ワークフロー（GitHub Flow）

```
main ← 本番環境（自動デプロイ）
├── feature/news-enhancement ← 機能開発ブランチ
├── feature/map-improvements ← 機能開発ブランチ
└── hotfix/urgent-bug-fix ← 緊急修正ブランチ
```

### ブランチ作成例

```bash
# 新機能開発用ブランチ
git checkout -b feature/議席予測改善
git checkout -b feature/モバイル対応
git checkout -b feature/データ可視化

# バグ修正用ブランチ
git checkout -b fix/地図表示エラー修正
git checkout -b hotfix/ニュース取得エラー
```

## 3. 開発フロー

### 基本的な作業手順

1. **最新コードを取得**
   ```bash
   git checkout main
   git pull origin main
   ```

2. **新しいブランチを作成**
   ```bash
   git checkout -b feature/あなたの機能名
   ```

3. **開発作業**
   - コードを編集
   - テスト実行
   - 動作確認

4. **変更をコミット**
   ```bash
   git add .
   git commit -m "機能追加: 詳細な説明"
   ```

5. **GitHubにプッシュ**
   ```bash
   git push origin feature/あなたの機能名
   ```

6. **プルリクエスト作成**
   - GitHubでPull Requestを作成
   - レビューを依頼

## 4. 役割分担の例

### フロントエンド開発者
- **担当範囲**: Vue.jsコンポーネント、UI/UX
- **主なファイル**:
  - `src/components/`
  - `src/App.vue`
  - CSS/スタイリング

### バックエンド開発者
- **担当範囲**: Netlify Functions、データ処理
- **主なファイル**:
  - `netlify/functions/`
  - `src/stores/`
  - API連携

### デザイナー
- **担当範囲**: UI/UXデザイン、レスポンシブ対応
- **主なファイル**:
  - CSS/スタイル
  - `src/App.vue`（スタイル部分）
  - 各コンポーネントのスタイル

### データ分析担当
- **担当範囲**: 議席予測、データ可視化
- **主なファイル**:
  - `src/components/SeatPrediction.vue`
  - `netlify/functions/fetch-*.js`
  - データ処理ロジック

## 5. コミット規約

### コミットメッセージ形式
```
種類: 簡潔な説明

詳細な説明（必要に応じて）
```

### 種類の例
- `feat`: 新機能追加
- `fix`: バグ修正
- `docs`: ドキュメント更新
- `style`: スタイル変更
- `refactor`: リファクタリング
- `test`: テスト追加・修正

### 例
```bash
git commit -m "feat: 議席予測グラフにアニメーション追加"
git commit -m "fix: 地図マーカーが正しく表示されない問題を修正"
git commit -m "docs: README.mdに開発環境セットアップ手順を追加"
```

## 6. コードレビュー

### プルリクエストのベストプラクティス

1. **明確なタイトルと説明**
   ```
   タイトル: 議席予測機能の精度向上
   
   説明:
   - 世論調査データの重み付けアルゴリズムを改善
   - 信頼区間の計算方法を見直し
   - テストケースを追加
   ```

2. **小さな単位での変更**
   - 1つのPRで1つの機能または修正
   - レビューしやすいサイズに分割

3. **テスト済みコード**
   - 動作確認済み
   - エラーが発生しないことを確認

### レビュー観点
- **機能性**: 要件を満たしているか
- **コード品質**: 読みやすく保守しやすいか
- **パフォーマンス**: 性能に問題はないか
- **セキュリティ**: セキュリティ上の問題はないか

## 7. 競合解決

### マージ競合が発生した場合

1. **最新のmainブランチを取得**
   ```bash
   git checkout main
   git pull origin main
   ```

2. **自分のブランチにマージ**
   ```bash
   git checkout feature/あなたのブランチ
   git merge main
   ```

3. **競合を解決**
   - エディタで競合箇所を修正
   - テストして動作確認

4. **解決をコミット**
   ```bash
   git add .
   git commit -m "merge: mainブランチとの競合を解決"
   ```

## 8. 開発環境の統一

### 推奨ツール
- **エディタ**: VS Code
- **拡張機能**:
  - Vue Language Features (Volar)
  - ESLint
  - Prettier
  - GitLens

### 設定ファイル
```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  }
}
```

## 9. コミュニケーション

### 推奨ツール
- **GitHub Issues**: バグ報告・機能要望
- **GitHub Discussions**: 設計相談・質問
- **Slack/Discord**: リアルタイム連絡
- **定期ミーティング**: 進捗共有

### Issue管理
```
タイトル: [バグ] 地図が読み込まれない

説明:
- 現象: 選挙区マップページで地図が表示されない
- 環境: Chrome 120, Windows 11
- 再現手順: 1. サイトにアクセス 2. 選挙区マップをクリック
- 期待結果: 地図が表示される
- 実際結果: 白い画面が表示される
```

## 10. リリース管理

### リリースフロー
1. **機能開発完了**
2. **プルリクエスト作成・レビュー**
3. **mainブランチにマージ**
4. **Netlifyで自動デプロイ**
5. **本番環境で動作確認**

### バージョン管理
```bash
# タグ付けでバージョン管理
git tag -a v1.1.0 -m "議席予測機能追加"
git push origin v1.1.0
```

## トラブルシューティング

### よくある問題と解決方法

1. **プッシュが拒否される**
   ```bash
   git pull origin main --rebase
   git push origin feature/ブランチ名
   ```

2. **ローカル環境が動かない**
   ```bash
   rm -rf node_modules
   npm install
   npm run dev
   ```

3. **Netlify Functionsが動かない**
   - 環境変数の設定確認
   - ログの確認
   - ローカルでのテスト実行